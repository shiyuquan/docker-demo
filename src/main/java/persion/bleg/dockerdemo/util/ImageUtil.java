package persion.bleg.dockerdemo.util;

import sun.misc.BASE64Decoder;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

/**
 * @author shiyuquan
 * @since 2020/8/31 11:37 上午
 */
public class ImageUtil {

    /**
     * base64字符串转化成图片
     *
     * @param imgData     图片编码
     * @param imgFilePath 存放到本地路径
     * @return
     * @throws IOException
     */
    public static boolean generateImage(String imgData, String imgFilePath) {
        // 图像数据为空
        if (imgData == null) {
            return false;
        }
        BASE64Decoder decoder = new BASE64Decoder();
        try (OutputStream out = new FileOutputStream(imgFilePath);) {
            // Base64解码
            byte[] b = decoder.decodeBuffer(imgData);
            for (int i = 0; i < b.length; ++i) {
                // 调整异常数据
                if (b[i] < 0) {
                    b[i] += 256;
                }
            }
            out.write(b);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

    public static void main(String[] args) {
        String data = "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";
        generateImage(data, "/Users/shiyuquan/Documents/a.jpg");
    }
}
